# 人体反应速度测试仪

- [English Version](./README.md)

## 项目概述

该项目旨在开发一个人体反应速度测试仪，通过一系列的灯光和按键交互来测试参与者的反应速度。该设计在校内评审中获得了 98 分的高评价。

## 模块原理及示意图

- 篇幅所限，了解更多请点击

- [English Version](./Design-EN.md)

- [中文版](./Design-CN.md)

## 目录

- [人体反应速度测试仪](#人体反应速度测试仪)
  - [项目概述](#项目概述)
  - [模块原理及示意图](#模块原理及示意图)
  - [目录](#目录)
  - [基本功能](#基本功能)
  - [开发平台](#开发平台)
  - [模块结构与总体框图](#模块结构与总体框图)
  - [总体方案说明](#总体方案说明)

## 基本功能

1. **测试启动**:

   - 用户通过按下控制开关（Ks）来启动测试。

2. **信号灯显示**:

   - 系统包含 4 路信号灯（L1-L4），每次测试时，这些灯随机显示 0001 到 1111 之间的一种组合。
   - 信号灯组合每两秒自动变化一次。

3. **计时机制**:

   - 当信号灯亮起时，计时器开始计时。
   - 如果用户按下的按键（K1-K4）与当前亮起的信号灯组合相对应，计时器则停止。
   - 如果没有按键按下或按键错误，计时器继续计时。

4. **显示**:

   - 计时器的输出通过 4 位数码管显示，具体显示格式为两位显示秒的个位和十位，两位显示 0.1 秒和 0.01 秒。

5. **测试循环**:

   - 每次新测试开始时，信号灯状态转换的同时，计时器自动重置。
   - 完成十次测试后，系统自动结束测试，并显示累加的总时长。

6. **通过/失败判定**:

   - 如果总时长小于 10 秒，测试通过，“PASS”指示灯点亮。
   - 否则，测试失败，“FAIL”指示灯亮起。

7. **错误累计**:

   - 每次按键错误都会累计，错误次数达到 4 次或以上时，即使计时如何，测试均判为失败。

8. **结果显示**:
   - 测试结束后，显示 10 次测试的平均反应时间，并动态显示计时信息。

## 开发平台

- 项目使用开发板 EPM1270-V08 进行开发。
- QuartusII9.1

## 模块结构与总体框图

![image](https://github.com/user-attachments/assets/a421a835-f3a2-45b5-9ac3-671e9d6c47ba)
![image](https://github.com/user-attachments/assets/6c70e3de-bf85-4c05-a4f8-04c48d714717)

## 总体方案说明

1. **时钟信号处理**:

   - 脉冲时钟源接入电路后，提供 1kHz 信号。
   - 通过分频器模块（fdiv）将其分频为 100Hz、10Hz、1Hz、0.5Hz、2Hz、0.1Hz 信号，供后续电路使用。
   - 0.5Hz 时钟用于伪随机数生成器，生成的四位随机二进制数输出至指示灯，并送入比较器。

2. **信号处理与计时**:

   - 随机数发生器输出与外接按钮信号在比较器中进行比较，结果送至锁存器。
   - 计时器通过 2Hz 时钟进行计时，0.5Hz 时钟用于 2 秒计时。
   - 计时器与显示电路（dy_time）接收锁存器的数据来决定是否继续计时。
   - 100Hz 时钟用于秒和小数秒的显示与计时。

3. **显示与判断**:
   - 通过动态信号刷新模块（dy_gen）实现数码管动态显示。
   - dy_time 模块内置测试结果统计模块，提供 API 接口用于结果判断和显示。
   - 模块 wr_pa 用于显示通过或失败状态，确保动态刷新信号接入 74244 时，二者不能同时生效。
